{% extends "base.html" %}

{% block content %}
<div class="card mx-auto mt-4 shadow-lg" style="max-width: 800px; border-radius: 10px;">
    <div class="card-header bg-primary text-white text-center" style="border-top-left-radius: 10px; border-top-right-radius: 10px;">
        <h3>Your Account</h3>
    </div>
    <div class="card-body">
        <form method="POST">
            <div class="form-group">
                <label for="first_name">First Name:</label>
                <input type="text" id="first_name" name="first_name" class="form-control" value="{{ user.get('first_name', '') }}">
            </div>
            <div class="form-group">
                <label for="last_name">Last Name:</label>
                <input type="text" id="last_name" name="last_name" class="form-control" value="{{ user.get('last_name', '') }}">
            </div>
            <div class="form-group">
                <label for="phone_number">Phone Number:</label>
                <input type="text" id="phone_number" name="phone_number" class="form-control" value="{{ user.get('phone_number', '') }}">
            </div>
            <button type="submit" class="btn btn-primary">Save</button>
        </form>
    </div>
    <div class="card-footer">
        <h4>Your Booked Rooms:</h4>
        {% if booked_rooms %}
        <ul class="list-group">
            {% for room in booked_rooms %}
            <li class="list-group-item">
                <div>
                    <strong>{{ room.name }}</strong> (Â£{{ room.price }}) - {{ room.location }}
                </div>
                <div class="mt-2">
                    <p><strong>Description:</strong> {{ room.description }}</p>
                    <p><strong>Check-In:</strong> {{ room.check_in if room.check_in else 'Not specified' }}</p>
                    <p><strong>Check-Out:</strong> {{ room.check_out if room.check_out else 'Not specified' }}</p>
                </div>
                <div class="mt-2">
                    <form method="POST" action="{{ url_for('cancel_booking', room_id=room.id) }}" style="display: inline;">
                        <button class="btn btn-danger btn-sm">Cancel</button>
                    </form>
                </div>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p>You have not booked any rooms yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}